

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Guides &mdash; BarterDEX 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="BarterDEX 0.1 documentation" href="index.html"/>
        <link rel="next" title="API docs" href="api.html"/>
        <link rel="prev" title="Getting Started with BarterDEX" href="getting_started.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> BarterDEX
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with BarterDEX</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use-barterdex-using-cli">How to use BarterDEX using CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linux-16-04">Linux (16.04)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#macos">MacOS</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation-setup">Installation &amp; Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-use-insomnia-together-with-the-cli">How to use Insomnia together with the CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#environment-variables">Environment variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#electrum-calls">Electrum calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#history">History</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-create-a-new-barterdex-trading-network">How to create a new BarterDEX trading network</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="whitepaper.html">Whitepaper</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BarterDEX</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Guides</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/guides.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="guides">
<h1>Guides<a class="headerlink" href="#guides" title="Permalink to this headline">¶</a></h1>
<div class="section" id="how-to-use-barterdex-using-cli">
<span id="cli-manual-installation-guide"></span><h2>How to use BarterDEX using CLI<a class="headerlink" href="#how-to-use-barterdex-using-cli" title="Permalink to this headline">¶</a></h2>
<p>Using BarterDEX with the Command Line Interface, you get access to all the low level Remote Procedure Calls (RPC) that exist in BarterDEX. It gives you power and control over how you want to be a trader / marketmaker. Throughout this guide, the command line (terminal) is used for installing BarterDEX.</p>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>At this time, only Linux and MacOS are supported.</p>
<div class="section" id="linux-16-04">
<h4>Linux (16.04)<a class="headerlink" href="#linux-16-04" title="Permalink to this headline">¶</a></h4>
<p>Download and install Nanomsg:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/nanomsg/nanomsg
<span class="nb">cd</span> nanomsg
cmake .
make
sudo make install
sudo ldconfig
</pre></div>
</div>
<p>Install required packages:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get install git libcurl4-openssl-dev build-essential
</pre></div>
</div>
</div>
<div class="section" id="macos">
<h4>MacOS<a class="headerlink" href="#macos" title="Permalink to this headline">¶</a></h4>
<p>To install Nanomsg on MacOS, it’s easiest to install it using Homebrew. Homebrew is a handy package manager for MacOS. If you don’t have it already, download it by entering the following into a Terminal window:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>/usr/bin/ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Afterwards, install Homebrew by typing:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>brew install nanomsg
</pre></div>
</div>
<p>That’s it!</p>
</div>
</div>
<div class="section" id="installation-setup">
<h3>Installation &amp; Setup<a class="headerlink" href="#installation-setup" title="Permalink to this headline">¶</a></h3>
<p>Installation is the same for Linux and MacOS. Start by cloning the SuperNET repository:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/jl777/SuperNET -b dev
</pre></div>
</div>
<p>This will download all the files necessary to start using BarterDEX from the command line. It uses the Development branch, assuring you with the latest updates. If you don’t want this, type <code class="docutils literal"><span class="pre">git</span> <span class="pre">checkout</span> <span class="pre">master</span></code> to work with more stable releases.</p>
<p>Now navigate to the SuperNET folder and execute the install script:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/SuperNET/iguana/exchanges
./install
</pre></div>
</div>
<p>This copies a bunch of scripts in the dexscripts folder, which is where we need to go next. This dexscripts folder now contains executable scripts that issue the most common API calls.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ../dexscripts
</pre></div>
</div>
<p>Before we can use any of these scripts, some security measures are needed to prevent bad actors from issuing API calls without your consent. The <code class="docutils literal"><span class="pre">passphrase</span></code> and <code class="docutils literal"><span class="pre">userpass</span></code> values take care of this security.</p>
<p>Create the passphrase file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nano passphrase
</pre></div>
</div>
<p>This file should contain the following line, with a strong passphrase between the &lt;&gt;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">passphrase</span><span class="o">=</span><span class="s2">&quot;&lt;strong userpass value here&gt;&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Ctrl-x</span></code> to exit, and press <code class="docutils literal"><span class="pre">y</span></code> to save the changes.</p>
<p>The <code class="docutils literal"><span class="pre">userpass</span></code> value is derived from the <code class="docutils literal"><span class="pre">passphrase</span></code> value, and in order to obtain the <code class="docutils literal"><span class="pre">userpass</span></code> value, we need to start BarterDEX. Starting BarterDEX (or actually the <code class="docutils literal"><span class="pre">marketmaker</span></code> process) is done by executing the <code class="docutils literal"><span class="pre">client</span></code> script, which basically is an automated combination of retrieving the latest updates and building the marketmaker executable file: (it can take a while before anything shows up)</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>./client
</pre></div>
</div>
<p>Let it load until you see a line that starts with <code class="docutils literal"><span class="pre">&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="pre">DEX</span> <span class="pre">stats</span> <span class="pre">127.0.0.1:7783</span></code>. This means the BarterDEX node is now up and running and that it’s able to listen for commands.</p>
<p>To obtain the <code class="docutils literal"><span class="pre">userpass</span></code> value, we need to execute the <code class="docutils literal"><span class="pre">setpassphrase</span></code> script. Open a new terminal window, navigate to the dexscripts folder and execute the <code class="docutils literal"><span class="pre">setpassphrase</span></code> script:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/SuperNET/iguana/dexscripts
./setpassphrase
</pre></div>
</div>
<p>The response contains the <code class="docutils literal"><span class="pre">userpass</span></code> value. Copy this value and paste it in a newly created userpass file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>nano userpass
<span class="nb">export</span> <span class="nv">userpass</span><span class="o">=</span><span class="s2">&quot;&lt;paste userpass value here&gt;&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Ctrl-x</span></code> to exit, <code class="docutils literal"><span class="pre">y</span></code> to save changes.</p>
<p>Everything is now good to go. From here on, you can issue any script that is in the dexscripts folder, such as the <code class="docutils literal"><span class="pre">orderbook</span></code> script, that fetches all the orders from the specified pair, or the <code class="docutils literal"><span class="pre">getcoin</span></code> script that gets all the coin-specific information from the coin as defined inside that script.</p>
<p>The API docs explain all the BarterDEX API calls.</p>
</div>
</div>
<div class="section" id="how-to-use-insomnia-together-with-the-cli">
<h2>How to use Insomnia together with the CLI<a class="headerlink" href="#how-to-use-insomnia-together-with-the-cli" title="Permalink to this headline">¶</a></h2>
<p>Insomnia is a great tool to replace the terminal window, but still be able to issue all the API calls in a visually more attractive way. Insomnia stores all the different API calls in a folder structure, with the possibility to set environment variables on all calls in a folder. This makes it quite easy to maintain different netid’s or manage multiple marketmakers on the same netid using a different RPC port.</p>
<img alt="_images/insomnia-overview.png" class="align-center" src="_images/insomnia-overview.png" />
<p>Download Insomnia here: <a class="reference external" href="https://insomnia.rest">https://insomnia.rest</a>. It is available for all platforms. This guide will use Linux as an example.</p>
<p>It is not necessary to have native coin daemons running. As you will see, managing different coins using Electrum in Insomnia is not difficult.</p>
<p>Make sure to follow the above guide: <a class="reference internal" href="#cli-manual-installation-guide"><span class="std std-ref">How to use BarterDEX using CLI</span></a>. We need to be able to start a marketmaker instance from the command line in order to start using Insomnia.</p>
<p>The first call you need to do when you start a marketmaker instance, is to set the passphrase using the <code class="docutils literal"><span class="pre">setpassphrase</span></code> call. Normally, using a CLI, you go to <code class="docutils literal"><span class="pre">~/SuperNET/iguana/dexscripts</span></code> and execute the <code class="docutils literal"><span class="pre">setpassphrase</span></code> script stored there. Now, we are going to open that script and copy the contents to Insomnia.</p>
<p>Go to the <code class="docutils literal"><span class="pre">dexscripts</span></code> folder:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/SuperNET/iguana/dexscripts
nano setpassphrase
</pre></div>
</div>
<img alt="_images/setpassphrase-init.png" class="align-center" src="_images/setpassphrase-init.png" />
<p>Copy the contents of only the curl command to your clipboard (Ctrl-Shift-c):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>curl --url <span class="s2">&quot;http://127.0.0.1:7783&quot;</span> --data <span class="s2">&quot;{\&quot;userpass\&quot;:\&quot;1d8b27b21efabcd96571cd56f91a40fb9aa4cc623d273c63bf9223dc6f8cd81f\&quot;,\&quot;method\&quot;:\&quot;passphrase\&quot;,\&quot;passphrase\&quot;:\&quot;</span><span class="nv">$passphrase</span><span class="s2">\&quot;,\&quot;gui\&quot;:\&quot;nogui\&quot;}&quot;</span>
</pre></div>
</div>
<p>Now, go to Insomnia, and create a New Request (Ctrl-N).</p>
<img alt="_images/setpassphrase-new-request.png" class="align-center" src="_images/setpassphrase-new-request.png" />
<p>Name it <code class="docutils literal"><span class="pre">setpassphrase</span></code> and click Create.</p>
<p>Now, paste the just copied curl command in the textfield area, right next to the the GET dropdown:</p>
<img alt="_images/setpassphrase-copy-curl.png" class="align-center" src="_images/setpassphrase-copy-curl.png" />
<p>Insomnia recognises this curl command, and automatically extracts the ip-address and the data. Let’s call that middle part of Insomnia the Input screen. It still looks a bit ugly, so let’s make it look better.</p>
<p>Click on Other, and change Other to JSON.</p>
<img alt="_images/setpassphrase-to-json.png" class="align-center" src="_images/setpassphrase-to-json.png" />
<p>Next, Beautify this JSON:</p>
<img alt="_images/setpassphrase-beautify.png" class="align-center" src="_images/setpassphrase-beautify.png" />
<p>It should result in this:</p>
<img alt="_images/setpassphrase-after-beautify.png" class="align-center" src="_images/setpassphrase-after-beautify.png" />
<p>Looks better, right? This process of copying a curl command from the <code class="docutils literal"><span class="pre">dexscripts</span></code> folder, creating a new request and pasting the curl command in Insomnia is what you probably need to do for most of the commands, like <code class="docutils literal"><span class="pre">orderbook</span></code>, <code class="docutils literal"><span class="pre">buy</span></code> and <code class="docutils literal"><span class="pre">balances</span></code>.</p>
<p>Now enter your passphrase in the area where the passphrase still is empty, between the 2 quotes. Start a marketmaker instance by running <code class="docutils literal"><span class="pre">client</span></code> from the dexscripts folder and let it boot. When it’s done booting, click the Send button in Insomnia for the setpassphrase script.</p>
<p>(if the output on the right side complains that the userpass has not been set, make sure to set the userpass value with <code class="docutils literal"><span class="pre">ef7ca9d596f4d0b504011989c9261330d3ab6c0aa092e779ce6479f8c23cd413</span></code>).</p>
<p>This is what you should see in the output part of the screen, when you clicked Send:</p>
<img alt="_images/setpassphrase-after-send.png" class="align-center" src="_images/setpassphrase-after-send.png" />
<p>The next thing you probably want to see, is an orderbook for some pair, like KMD/BTC. Go to the <code class="docutils literal"><span class="pre">dexscripts</span></code> folder again, copy the complete curl command for <code class="docutils literal"><span class="pre">orderbook</span></code> and paste it in a new request. I called this new request <code class="docutils literal"><span class="pre">orderbook</span> <span class="pre">KMD/BTC</span></code> and the end result should look like this:</p>
<img alt="_images/orderbook-initial.png" class="align-center" src="_images/orderbook-initial.png" />
<p>Since with KMD/BTC, you’re saying you want to buy KMD with BTC, the data in the JSON needs to be changed. Change REVS to KMD and KMD to BTC, such that <code class="docutils literal"><span class="pre">&quot;base&quot;:</span> <span class="pre">&quot;KMD&quot;</span></code> and <code class="docutils literal"><span class="pre">&quot;rel&quot;:</span> <span class="pre">&quot;BTC&quot;</span></code>.
You also need to copy the userpass from the <code class="docutils literal"><span class="pre">setpassphrase</span></code> call we did before. On the second line in the output of the <code class="docutils literal"><span class="pre">setpassphrase</span></code> call, you see a userpass value. Copy this value and paste it in the <code class="docutils literal"><span class="pre">orderbook</span></code> request. It should end up like this:</p>
<img alt="_images/orderbook-update-data.png" class="align-center" src="_images/orderbook-update-data.png" />
<p>Try Sending this request. It will complain that at least one of the coins is disabled, so we need to enable them. KMD is enabled by default, which means that if you have a native KMD daemon running, you don’t have to explicitly enable KMD. If you don’t have a KMD daemon, or a BTC daemon, you need to use a Electrum SPV for that. Let’s first enable both coins using Electrum.</p>
<p>Go to <a class="reference external" href="http://pad.supernet.org/electrum-servers">http://pad.supernet.org/electrum-servers</a> where you’ll find a long list of all coins that support Electrum. Find BTC, copy the curl command and paste it in Insomnia, like you did with the other requests. Do the same for KMD in a new request, such that you end up with 2 requests: electrum BTC and electrum KMD:</p>
<img alt="_images/electrum-kmd-btc.png" class="align-center" src="_images/electrum-kmd-btc.png" />
<p>Click Send for both requests, and if all is right, you’ll see a success message in the output screen.</p>
<p>Now that both coins are enabled (a successful electrum request automatically enables the coin), we can go to the orderbook request and see if something happens. If all is right, you’ll see something like this:</p>
<img alt="_images/orderbook-output.png" class="align-center" src="_images/orderbook-output.png" />
<div class="section" id="environment-variables">
<h3>Environment variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="filtering">
<h3>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="electrum-calls">
<h3>Electrum calls<a class="headerlink" href="#electrum-calls" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="history">
<h3>History<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<p>Insomnia stores a list of all the calls you did in the past, including its output. This is useful for debugging and retrieving information you might need at a later stage.</p>
</div>
</div>
<div class="section" id="how-to-create-a-new-barterdex-trading-network">
<h2>How to create a new BarterDEX trading network<a class="headerlink" href="#how-to-create-a-new-barterdex-trading-network" title="Permalink to this headline">¶</a></h2>
<p>Since BarterDEX is a peer-to-peer network, seeded by some ip-addresses to create the network, others can create a BarterDEX network of their own. This enables people to trade within a private group of traders, or to trade directly from person to person.</p>
<p>See <a class="reference internal" href="api.html#new-or-private-network"><span class="std std-ref">New or private network</span></a> in the API docs on how to do this.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="API docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting_started.html" class="btn btn-neutral" title="Getting Started with BarterDEX" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Jorian.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>